openapi: 3.0.3
info:
  title: RAG Service
  version: 2.1.0
paths:
  /health:
    get:
      summary: Health
      operationId: health_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /app/register:
    post:
      tags:
      - app
      summary: Register App
      description: '注册/启用一个业务插件（App）

        - 不再写入内存 registry

        - 注册事实只落 SQLite（app_registry 表）

        - 仍然会校验 plugins/<app_id> 是否可加载（防止写入垃圾 app_id）'
      operationId: register_app_app_register_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppRegisterReq'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppRegisterResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/list:
    get:
      tags:
      - app
      summary: List Apps
      description: 返回插件目录 + DB 注册状态的融合视图
      operationId: list_apps_app_list_get
      parameters:
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AppInfoResp'
                title: Response List Apps App List Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/{app_id}/intents:
    get:
      tags:
      - app
      summary: List Intents
      description: 返回插件 intents（含 exposed intents）
      operationId: list_intents_app__app_id__intents_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppIntentsResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - app
      summary: Update Intents
      operationId: update_intents_app__app_id__intents_put
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppIntentsUpdateReq'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppIntentsDetailResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/{app_id}/intents/detail:
    get:
      tags:
      - app
      summary: Get Intent Details
      operationId: get_intent_details_app__app_id__intents_detail_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppIntentsDetailResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/{app_id}/workflows:
    get:
      tags:
      - app
      summary: Get Workflows
      operationId: get_workflows_app__app_id__workflows_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppWorkflowsResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - app
      summary: Update Workflows
      operationId: update_workflows_app__app_id__workflows_put
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppWorkflowsUpdateReq'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppWorkflowsResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/{app_id}/plugin/files:
    get:
      tags:
      - app
      summary: List Plugin Files
      operationId: list_plugin_files_app__app_id__plugin_files_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginFileListResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/{app_id}/plugin/file:
    get:
      tags:
      - app
      summary: Read Plugin File
      operationId: read_plugin_file_app__app_id__plugin_file_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: path
        in: query
        required: true
        schema:
          type: string
          title: Path
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginFileReadResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    put:
      tags:
      - app
      summary: Update Plugin File
      operationId: update_plugin_file_app__app_id__plugin_file_put
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PluginFileUpdateReq'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PluginFileUpdateResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /app/{app_id}/status:
    get:
      tags:
      - app
      summary: App Status
      operationId: app_status_app__app_id__status_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppStatusResp'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /kb/list:
    get:
      tags:
      - knowledge-base
      summary: List Kbs
      operationId: list_kbs_kb_list_get
      parameters:
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/KBInfo'
                title: Response List Kbs Kb List Get
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /kb/{app_id}/{kb_key}/stats:
    get:
      tags:
      - knowledge-base
      summary: Kb Stats
      operationId: kb_stats_kb__app_id___kb_key__stats_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: private_db_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
      - name: session_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBStats'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /kb/{app_id}/{kb_key}/documents:
    get:
      tags:
      - knowledge-base
      summary: List Documents
      operationId: list_documents_kb__app_id___kb_key__documents_get
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 20
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: private_db_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
      - name: session_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBDocumentList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - knowledge-base
      summary: Create Document
      operationId: create_document_kb__app_id___kb_key__documents_post
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KBDocumentUpsert'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBDocument'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /kb/{app_id}/{kb_key}/documents/{doc_id}:
    put:
      tags:
      - knowledge-base
      summary: Replace Document
      operationId: replace_document_kb__app_id___kb_key__documents__doc_id__put
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: doc_id
        in: path
        required: true
        schema:
          type: string
          title: Doc Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KBDocumentUpsert'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBDocument'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    patch:
      tags:
      - knowledge-base
      summary: Update Document
      operationId: update_document_kb__app_id___kb_key__documents__doc_id__patch
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: doc_id
        in: path
        required: true
        schema:
          type: string
          title: Doc Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KBDocumentUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBDocument'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - knowledge-base
      summary: Delete Document
      operationId: delete_document_kb__app_id___kb_key__documents__doc_id__delete
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: doc_id
        in: path
        required: true
        schema:
          type: string
          title: Doc Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /kb/{app_id}/configs:
    post:
      tags:
      - knowledge-base
      summary: Create Kb Config
      operationId: create_kb_config_kb__app_id__configs_post
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KBConfigCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBConfigInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /kb/{app_id}/{kb_key}/config:
    patch:
      tags:
      - knowledge-base
      summary: Update Kb Config
      operationId: update_kb_config_kb__app_id___kb_key__config_patch
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/KBConfigUpdate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/KBConfigInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - knowledge-base
      summary: Delete Kb Config
      operationId: delete_kb_config_kb__app_id___kb_key__config_delete
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: kb_key
        in: path
        required: true
        schema:
          type: string
          title: Kb Key
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /stores/health:
    get:
      tags:
      - stores
      summary: Stores Health
      operationId: stores_health_stores_health_get
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoresHealthResponse'
  /ingestion/logs:
    get:
      tags:
      - ingestion
      summary: List Logs
      operationId: list_logs_ingestion_logs_get
      parameters:
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: kb_key
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Key
      - name: status
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionLogList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    post:
      tags:
      - ingestion
      summary: Create Log
      operationId: create_log_ingestion_logs_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngestionLogCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingestion/upload:
    post:
      tags:
      - ingestion
      summary: Upload File
      operationId: upload_file_ingestion_upload_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_file_ingestion_upload_post'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingestion/jobs:
    post:
      tags:
      - ingestion-jobs
      summary: Create Job
      operationId: create_job_ingestion_jobs_post
      parameters:
      - name: run
        in: query
        required: false
        schema:
          type: boolean
          default: false
          title: Run
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngestionJobCreate'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionJobInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - ingestion-jobs
      summary: List Jobs
      operationId: list_jobs_ingestion_jobs_get
      parameters:
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: private_db_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
      - name: session_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: status
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionJobList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingestion/jobs/{job_id}:
    get:
      tags:
      - ingestion-jobs
      summary: Get Job
      operationId: get_job_ingestion_jobs__job_id__get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: integer
          title: Job Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionJobInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingestion/jobs/{job_id}/run:
    post:
      tags:
      - ingestion-jobs
      summary: Run Job
      operationId: run_job_ingestion_jobs__job_id__run_post
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: integer
          title: Job Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionJobInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingestion/jobs/{job_id}/runs:
    get:
      tags:
      - ingestion-jobs
      summary: List Runs
      operationId: list_runs_ingestion_jobs__job_id__runs_get
      parameters:
      - name: job_id
        in: path
        required: true
        schema:
          type: integer
          title: Job Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionJobRuns'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /ingestion/jobs/presets:
    get:
      tags:
      - ingestion-jobs
      summary: Ingestion Job Presets
      operationId: ingestion_job_presets_ingestion_jobs_presets_get
      parameters:
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: kb_key
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Key
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 20
          title: Limit
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionJobPreset'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /memory/push:
    post:
      tags:
      - memory
      summary: Push Memory
      operationId: push_memory_memory_push_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MemoryPushRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemoryPushResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /memory/upload:
    post:
      tags:
      - memory
      summary: Upload Memory
      operationId: upload_memory_memory_upload_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/Body_upload_memory_memory_upload_post'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemoryUploadResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /memory/sessions:
    get:
      tags:
      - memory
      summary: List Memory Sessions
      operationId: list_memory_sessions_memory_sessions_get
      parameters:
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: session_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 20
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemorySessionList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    delete:
      tags:
      - memory
      summary: Delete Memory Session
      operationId: delete_memory_session_memory_sessions_delete
      parameters:
      - name: app_id
        in: query
        required: true
        schema:
          type: string
          title: App Id
      - name: session_id
        in: query
        required: true
        schema:
          type: string
          title: Session Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: delete_files
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Delete Files
      - name: delete_vectors
        in: query
        required: false
        schema:
          type: integer
          default: 1
          title: Delete Vectors
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemoryDeleteResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /memory/sessions/{memory_key}:
    delete:
      tags:
      - memory
      summary: Delete Memory Session By Key
      operationId: delete_memory_session_by_key_memory_sessions__memory_key__delete
      parameters:
      - name: memory_key
        in: path
        required: true
        schema:
          type: string
          title: Memory Key
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: delete_files
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Delete Files
      - name: delete_vectors
        in: query
        required: false
        schema:
          type: integer
          default: 1
          title: Delete Vectors
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemoryDeleteResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /memory/{memory_key}/contexts:
    get:
      tags:
      - memory
      summary: List Memory Contexts
      operationId: list_memory_contexts_memory__memory_key__contexts_get
      parameters:
      - name: memory_key
        in: path
        required: true
        schema:
          type: string
          title: Memory Key
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 20
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: include_content
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Include Content
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemoryContextList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /memory/contexts/{uid}:
    patch:
      tags:
      - memory
      summary: Update Memory Context
      operationId: update_memory_context_memory_contexts__uid__patch
      parameters:
      - name: uid
        in: path
        required: true
        schema:
          type: string
          title: Uid
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: data_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MemoryContextUpdateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MemoryContextItem'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /private_dbs:
    post:
      tags:
      - private-db
      summary: Create Private Db
      operationId: create_private_db_private_dbs_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrivateDBCreateRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateDBInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
    get:
      tags:
      - private-db
      summary: List Private Dbs
      operationId: list_private_dbs_private_dbs_get
      parameters:
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: owner_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Owner Wallet Id
      - name: session_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateDBList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /private_dbs/{private_db_id}:
    get:
      tags:
      - private-db
      summary: Get Private Db
      operationId: get_private_db_private_dbs__private_db_id__get
      parameters:
      - name: private_db_id
        in: path
        required: true
        schema:
          type: string
          title: Private Db Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateDBInfo'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /private_dbs/{private_db_id}/bind:
    post:
      tags:
      - private-db
      summary: Bind Private Db
      operationId: bind_private_db_private_dbs__private_db_id__bind_post
      parameters:
      - name: private_db_id
        in: path
        required: true
        schema:
          type: string
          title: Private Db Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PrivateDBBindRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateDBBindResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /private_dbs/{private_db_id}/sessions:
    get:
      tags:
      - private-db
      summary: List Private Db Sessions
      operationId: list_private_db_sessions_private_dbs__private_db_id__sessions_get
      parameters:
      - name: private_db_id
        in: path
        required: true
        schema:
          type: string
          title: Private Db Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateDBSessionList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /private_dbs/{private_db_id}/sessions/{session_id}:
    delete:
      tags:
      - private-db
      summary: Unbind Private Db Session
      operationId: unbind_private_db_session_private_dbs__private_db_id__sessions__session_id__delete
      parameters:
      - name: private_db_id
        in: path
        required: true
        schema:
          type: string
          title: Private Db Id
      - name: session_id
        in: path
        required: true
        schema:
          type: string
          title: Session Id
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateDBUnbindResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /audit/logs:
    get:
      tags:
      - audit
      summary: List Audit Logs
      operationId: list_audit_logs_audit_logs_get
      parameters:
      - name: wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      - name: app_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
      - name: entity_type
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Entity Type
      - name: entity_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Entity Id
      - name: action
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Action
      - name: operator_wallet_id
        in: query
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Operator Wallet Id
      - name: limit
        in: query
        required: false
        schema:
          type: integer
          default: 50
          title: Limit
      - name: offset
        in: query
        required: false
        schema:
          type: integer
          default: 0
          title: Offset
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuditLogList'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/public/auth/challenge:
    post:
      tags:
      - auth
      summary: Auth Challenge
      operationId: auth_challenge_api_v1_public_auth_challenge_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthChallengeRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/public/auth/verify:
    post:
      tags:
      - auth
      summary: Auth Verify
      operationId: auth_verify_api_v1_public_auth_verify_post
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthVerifyRequest'
        required: true
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /api/v1/public/auth/refresh:
    post:
      tags:
      - auth
      summary: Auth Refresh
      operationId: auth_refresh_api_v1_public_auth_refresh_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/public/auth/logout:
    post:
      tags:
      - auth
      summary: Auth Logout
      operationId: auth_logout_api_v1_public_auth_logout_post
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
  /api/v1/public/profile:
    get:
      tags:
      - public
      summary: Public Profile
      operationId: public_profile_api_v1_public_profile_get
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema: {}
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /query:
    post:
      summary: Query
      description: '/query 的职责：

        1) 查 DB：app 是否 active

        2) 生成 Identity（IdentityManager 内部也会查 DB）

        3) 校验 intent（仅 exposed intents）

        4) 按需加载 pipeline（不依赖内存预注册）

        5) 调用 pipeline.run(...)（业务预处理由插件完成）'
      operationId: query_query_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /resume/upload:
    post:
      tags:
      - resume
      summary: Upload Resume
      operationId: upload_resume_resume_upload_post
      parameters:
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResumeUploadRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResumeUploadResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
  /{app_id}/jd/upload:
    post:
      tags:
      - jd
      summary: Upload Jd
      operationId: upload_jd__app_id__jd_upload_post
      parameters:
      - name: app_id
        in: path
        required: true
        schema:
          type: string
          title: App Id
      - name: authorization
        in: header
        required: false
        schema:
          anyOf:
          - type: string
          - type: 'null'
          title: Authorization
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/JDUploadRequest'
      responses:
        '200':
          description: Successful Response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JDUploadResponse'
        '422':
          description: Validation Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HTTPValidationError'
components:
  schemas:
    AppInfoResp:
      properties:
        app_id:
          type: string
          title: App Id
        status:
          type: string
          title: Status
        has_plugin:
          type: boolean
          title: Has Plugin
        owner_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Owner Wallet Id
      type: object
      required:
      - app_id
      - status
      - has_plugin
      title: AppInfoResp
    AppIntentsDetailResp:
      properties:
        app_id:
          type: string
          title: App Id
        intents:
          items:
            $ref: '#/components/schemas/IntentDetailItem'
          type: array
          title: Intents
      type: object
      required:
      - app_id
      - intents
      title: AppIntentsDetailResp
    AppIntentsResp:
      properties:
        app_id:
          type: string
          title: App Id
        intents:
          items:
            type: string
          type: array
          title: Intents
        exposed_intents:
          items:
            type: string
          type: array
          title: Exposed Intents
      type: object
      required:
      - app_id
      - intents
      - exposed_intents
      title: AppIntentsResp
    AppIntentsUpdateReq:
      properties:
        intents:
          items:
            $ref: '#/components/schemas/IntentDetailItem'
          type: array
          title: Intents
      type: object
      title: AppIntentsUpdateReq
    AppRegisterReq:
      properties:
        app_id:
          type: string
          title: App Id
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
      type: object
      required:
      - app_id
      title: AppRegisterReq
    AppRegisterResp:
      properties:
        app_id:
          type: string
          title: App Id
        status:
          type: string
          title: Status
          default: ok
      type: object
      required:
      - app_id
      title: AppRegisterResp
    AppStatusKBInfo:
      properties:
        kb_key:
          type: string
          title: Kb Key
        collection:
          type: string
          title: Collection
        total_count:
          type: integer
          title: Total Count
        chunk_count:
          type: integer
          title: Chunk Count
        error:
          anyOf:
          - type: string
          - type: 'null'
          title: Error
      type: object
      required:
      - kb_key
      - collection
      - total_count
      - chunk_count
      title: AppStatusKBInfo
    AppStatusResp:
      properties:
        app_id:
          type: string
          title: App Id
        status:
          type: string
          title: Status
        owner_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Owner Wallet Id
        has_plugin:
          type: boolean
          title: Has Plugin
        kb_stats:
          items:
            $ref: '#/components/schemas/AppStatusKBInfo'
          type: array
          title: Kb Stats
        last_ingestion:
          anyOf:
          - $ref: '#/components/schemas/IngestionLogItem'
          - type: 'null'
      type: object
      required:
      - app_id
      - status
      - has_plugin
      title: AppStatusResp
    AppWorkflowsResp:
      properties:
        app_id:
          type: string
          title: App Id
        workflows:
          items:
            $ref: '#/components/schemas/WorkflowItem'
          type: array
          title: Workflows
      type: object
      required:
      - app_id
      - workflows
      title: AppWorkflowsResp
    AppWorkflowsUpdateReq:
      properties:
        workflows:
          items:
            $ref: '#/components/schemas/WorkflowItem'
          type: array
          title: Workflows
      type: object
      title: AppWorkflowsUpdateReq
    AuditLogItem:
      properties:
        id:
          type: integer
          title: Id
        operator_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Operator Wallet Id
        app_id:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
        entity_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Entity Type
        entity_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Entity Id
        action:
          type: string
          title: Action
        meta:
          additionalProperties: true
          type: object
          title: Meta
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
      type: object
      required:
      - id
      - action
      title: AuditLogItem
    AuditLogList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/AuditLogItem'
          type: array
          title: Items
      type: object
      title: AuditLogList
    AuthChallengeRequest:
      properties:
        address:
          type: string
          title: Address
          description: EVM address (0x...)
      type: object
      required:
      - address
      title: AuthChallengeRequest
    AuthVerifyRequest:
      properties:
        address:
          type: string
          title: Address
          description: EVM address (0x...)
        signature:
          type: string
          title: Signature
          description: Signature for the issued challenge (personal_sign)
      type: object
      required:
      - address
      - signature
      title: AuthVerifyRequest
    Body_upload_file_ingestion_upload_post:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
        app_id:
          type: string
          title: App Id
        kb_key:
          type: string
          title: Kb Key
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
        filename:
          anyOf:
          - type: string
          - type: 'null'
          title: Filename
        file:
          type: string
          format: binary
          title: File
      type: object
      required:
      - app_id
      - kb_key
      - file
      title: Body_upload_file_ingestion_upload_post
    Body_upload_memory_memory_upload_post:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
        app_id:
          type: string
          title: App Id
        session_id:
          type: string
          title: Session Id
        filename:
          anyOf:
          - type: string
          - type: 'null'
          title: Filename
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        summary_threshold:
          anyOf:
          - type: integer
          - type: 'null'
          title: Summary Threshold
        run_push:
          anyOf:
          - type: string
          - type: 'null'
          title: Run Push
        file:
          type: string
          format: binary
          title: File
      type: object
      required:
      - app_id
      - session_id
      - file
      title: Body_upload_memory_memory_upload_post
    HTTPValidationError:
      properties:
        detail:
          items:
            $ref: '#/components/schemas/ValidationError'
          type: array
          title: Detail
      type: object
      title: HTTPValidationError
    IngestionJobCreate:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 开发者钱包 ID（兼容字段；推荐使用 Authorization）
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 数据归属钱包 ID（业务用户）
        private_db_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
          description: 私有库 ID（session_id 二选一）
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
          description: 业务会话 ID（私有库绑定）
        app_id:
          type: string
          title: App Id
          description: Plugin app_id
        kb_key:
          type: string
          title: Kb Key
          description: KB key
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
          description: MinIO URL (minio://bucket/key)
        content:
          anyOf:
          - type: string
          - type: 'null'
          title: Content
          description: Inline text content (will be stored to MinIO)
        filename:
          anyOf:
          - type: string
          - type: 'null'
          title: Filename
          description: Optional filename for inline content
        file_type:
          anyOf:
          - type: string
          - type: 'null'
          title: File Type
          description: Optional file type override
        metadata:
          additionalProperties: true
          type: object
          title: Metadata
          description: Optional metadata
        options:
          additionalProperties: true
          type: object
          title: Options
          description: Job options
      type: object
      required:
      - app_id
      - kb_key
      title: IngestionJobCreate
    IngestionJobInfo:
      properties:
        id:
          type: integer
          title: Id
        wallet_id:
          type: string
          title: Wallet Id
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
        private_db_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
        app_id:
          type: string
          title: App Id
        kb_key:
          type: string
          title: Kb Key
        job_type:
          type: string
          title: Job Type
        source_url:
          anyOf:
          - type: string
          - type: 'null'
          title: Source Url
        file_type:
          anyOf:
          - type: string
          - type: 'null'
          title: File Type
        status:
          type: string
          title: Status
        options_json:
          anyOf:
          - type: string
          - type: 'null'
          title: Options Json
        result_json:
          anyOf:
          - type: string
          - type: 'null'
          title: Result Json
        error_message:
          anyOf:
          - type: string
          - type: 'null'
          title: Error Message
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
        started_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Started At
        finished_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Finished At
      type: object
      required:
      - id
      - wallet_id
      - app_id
      - kb_key
      - job_type
      - status
      title: IngestionJobInfo
    IngestionJobList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/IngestionJobInfo'
          type: array
          title: Items
      type: object
      title: IngestionJobList
    IngestionJobPreset:
      properties:
        bucket:
          type: string
          title: Bucket
        prefix:
          type: string
          title: Prefix
        recent_keys:
          items:
            type: string
          type: array
          title: Recent Keys
      type: object
      required:
      - bucket
      - prefix
      title: IngestionJobPreset
    IngestionJobRunItem:
      properties:
        id:
          type: integer
          title: Id
        job_id:
          type: integer
          title: Job Id
        status:
          type: string
          title: Status
        message:
          anyOf:
          - type: string
          - type: 'null'
          title: Message
        meta_json:
          anyOf:
          - type: string
          - type: 'null'
          title: Meta Json
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
      type: object
      required:
      - id
      - job_id
      - status
      title: IngestionJobRunItem
    IngestionJobRuns:
      properties:
        items:
          items:
            $ref: '#/components/schemas/IngestionJobRunItem'
          type: array
          title: Items
      type: object
      title: IngestionJobRuns
    IngestionLogCreate:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 开发者钱包 ID（兼容字段；推荐使用 Authorization）
        status:
          type: string
          title: Status
          description: started|success|failed|info
        message:
          anyOf:
          - type: string
          - type: 'null'
          title: Message
          description: Log message
          default: ''
        app_id:
          type: string
          title: App Id
          description: Plugin app_id
        kb_key:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Key
          description: KB key
        collection:
          anyOf:
          - type: string
          - type: 'null'
          title: Collection
          description: Vector collection
        meta:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Meta
      type: object
      required:
      - status
      - app_id
      title: IngestionLogCreate
    IngestionLogItem:
      properties:
        id:
          type: integer
          title: Id
        status:
          type: string
          title: Status
        message:
          anyOf:
          - type: string
          - type: 'null'
          title: Message
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
        app_id:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
        kb_key:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Key
        collection:
          anyOf:
          - type: string
          - type: 'null'
          title: Collection
        meta_json:
          anyOf:
          - type: string
          - type: 'null'
          title: Meta Json
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
      type: object
      required:
      - id
      - status
      title: IngestionLogItem
    IngestionLogList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/IngestionLogItem'
          type: array
          title: Items
      type: object
      title: IngestionLogList
    IntentDetailItem:
      properties:
        name:
          type: string
          title: Name
        description:
          type: string
          title: Description
          default: ''
        params:
          items:
            type: string
          type: array
          title: Params
        exposed:
          type: boolean
          title: Exposed
          default: true
      type: object
      required:
      - name
      title: IntentDetailItem
    JDUploadRequest:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 操作钱包 ID（兼容字段；推荐使用 Authorization）
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 可选：数据归属钱包 ID（业务用户）。默认等于 wallet_id。
        app_id:
          anyOf:
          - type: string
          - type: 'null'
          title: App Id
          description: 可选：业务插件 ID（未传则使用路径参数）
        jd:
          title: Jd
          description: JD JSON 或文本
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
          description: 可选：业务会话 ID
        private_db_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
          description: 可选：私有库 ID（与 session_id 二选一）
        jd_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Jd Id
          description: 可选：业务侧 JD ID
        kb_key:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Key
          description: 可选：指定 user_upload KB
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
          description: 可选：补充元数据
      type: object
      required:
      - jd
      title: JDUploadRequest
    JDUploadResponse:
      properties:
        jd_id:
          type: string
          title: Jd Id
        kb_key:
          type: string
          title: Kb Key
        collection:
          type: string
          title: Collection
        doc_id:
          type: string
          title: Doc Id
        source_url:
          type: string
          title: Source Url
      type: object
      required:
      - jd_id
      - kb_key
      - collection
      - doc_id
      - source_url
      title: JDUploadResponse
    KBConfigCreate:
      properties:
        kb_key:
          type: string
          title: Kb Key
          description: Logical KB key in config
        kb_type:
          type: string
          title: Kb Type
          description: KB type
        collection:
          type: string
          title: Collection
          description: Vector collection name
        text_field:
          type: string
          title: Text Field
          description: Text field name in properties
          default: text
        top_k:
          type: integer
          title: Top K
          description: Top-k retrieval size
          default: 3
        weight:
          type: number
          title: Weight
          description: Score weight
          default: 1.0
        use_allowed_apps_filter:
          type: boolean
          title: Use Allowed Apps Filter
          description: Filter by allowed apps
          default: false
        vector_fields:
          items:
            type: string
          type: array
          title: Vector Fields
          description: Fields used for embedding
        schema:
          items:
            additionalProperties: true
            type: object
          type: array
          title: Schema
          description: Schema field configs
      type: object
      required:
      - kb_key
      - kb_type
      - collection
      title: KBConfigCreate
    KBConfigInfo:
      properties:
        app_id:
          type: string
          title: App Id
          description: Plugin app_id
        kb_key:
          type: string
          title: Kb Key
          description: Logical KB key in config
        kb_type:
          type: string
          title: Kb Type
          description: KB type
        collection:
          type: string
          title: Collection
          description: Vector collection name
        text_field:
          type: string
          title: Text Field
          description: Text field name in properties
          default: text
        top_k:
          type: integer
          title: Top K
          description: Top-k retrieval size
        weight:
          type: number
          title: Weight
          description: Score weight
        use_allowed_apps_filter:
          type: boolean
          title: Use Allowed Apps Filter
          description: Filter by allowed apps
          default: false
        vector_fields:
          items:
            type: string
          type: array
          title: Vector Fields
          description: Fields used for embedding
        schema:
          items:
            additionalProperties: true
            type: object
          type: array
          title: Schema
          description: Schema field configs
      type: object
      required:
      - app_id
      - kb_key
      - kb_type
      - collection
      - top_k
      - weight
      title: KBConfigInfo
    KBConfigUpdate:
      properties:
        kb_type:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Type
          description: KB type
        collection:
          anyOf:
          - type: string
          - type: 'null'
          title: Collection
          description: Vector collection name
        text_field:
          anyOf:
          - type: string
          - type: 'null'
          title: Text Field
          description: Text field name in properties
        top_k:
          anyOf:
          - type: integer
          - type: 'null'
          title: Top K
          description: Top-k retrieval size
        weight:
          anyOf:
          - type: number
          - type: 'null'
          title: Weight
          description: Score weight
        use_allowed_apps_filter:
          anyOf:
          - type: boolean
          - type: 'null'
          title: Use Allowed Apps Filter
          description: Filter by allowed apps
        vector_fields:
          anyOf:
          - items:
              type: string
            type: array
          - type: 'null'
          title: Vector Fields
          description: Fields used for embedding
        schema:
          anyOf:
          - items:
              additionalProperties: true
              type: object
            type: array
          - type: 'null'
          title: Schema
          description: Schema field configs
      type: object
      title: KBConfigUpdate
    KBDocument:
      properties:
        id:
          type: string
          title: Id
        properties:
          additionalProperties: true
          type: object
          title: Properties
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
      type: object
      required:
      - id
      title: KBDocument
    KBDocumentList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/KBDocument'
          type: array
          title: Items
        total:
          anyOf:
          - type: integer
          - type: 'null'
          title: Total
      type: object
      title: KBDocumentList
    KBDocumentUpdate:
      properties:
        text:
          anyOf:
          - type: string
          - type: 'null'
          title: Text
          description: Text content for embedding
        properties:
          additionalProperties: true
          type: object
          title: Properties
        vector:
          anyOf:
          - items:
              type: number
            type: array
          - type: 'null'
          title: Vector
      type: object
      title: KBDocumentUpdate
    KBDocumentUpsert:
      properties:
        id:
          anyOf:
          - type: string
          - type: 'null'
          title: Id
          description: Optional object ID
        text:
          anyOf:
          - type: string
          - type: 'null'
          title: Text
          description: Text content for embedding
        properties:
          additionalProperties: true
          type: object
          title: Properties
        vector:
          anyOf:
          - items:
              type: number
            type: array
          - type: 'null'
          title: Vector
      type: object
      title: KBDocumentUpsert
    KBInfo:
      properties:
        app_id:
          type: string
          title: App Id
          description: Plugin app_id
        kb_key:
          type: string
          title: Kb Key
          description: Logical KB key in config
        kb_type:
          type: string
          title: Kb Type
          description: KB type
        collection:
          type: string
          title: Collection
          description: Vector collection name
        text_field:
          type: string
          title: Text Field
          description: Text field name in properties
          default: text
        top_k:
          type: integer
          title: Top K
          description: Top-k retrieval size
        weight:
          type: number
          title: Weight
          description: Score weight
        use_allowed_apps_filter:
          type: boolean
          title: Use Allowed Apps Filter
          description: Filter by allowed apps
          default: false
        vector_fields:
          items:
            type: string
          type: array
          title: Vector Fields
          description: Fields used for embedding
        schema:
          items:
            additionalProperties: true
            type: object
          type: array
          title: Schema
          description: Schema field configs
        status:
          anyOf:
          - type: string
          - type: 'null'
          title: Status
          description: App status in registry
      type: object
      required:
      - app_id
      - kb_key
      - kb_type
      - collection
      - top_k
      - weight
      title: KBInfo
    KBStats:
      properties:
        app_id:
          type: string
          title: App Id
        kb_key:
          type: string
          title: Kb Key
        collection:
          type: string
          title: Collection
        total_count:
          type: integer
          title: Total Count
        chunk_count:
          type: integer
          title: Chunk Count
      type: object
      required:
      - app_id
      - kb_key
      - collection
      - total_count
      - chunk_count
      title: KBStats
    MemoryContextItem:
      properties:
        uid:
          type: string
          title: Uid
        memory_key:
          type: string
          title: Memory Key
        wallet_id:
          type: string
          title: Wallet Id
        app_id:
          type: string
          title: App Id
        role:
          type: string
          title: Role
        url:
          type: string
          title: Url
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
        content_sha256:
          anyOf:
          - type: string
          - type: 'null'
          title: Content Sha256
        qa_count:
          anyOf:
          - type: integer
          - type: 'null'
          title: Qa Count
        is_summarized:
          anyOf:
          - type: integer
          - type: 'null'
          title: Is Summarized
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
        content:
          anyOf:
          - type: string
          - type: 'null'
          title: Content
      type: object
      required:
      - uid
      - memory_key
      - wallet_id
      - app_id
      - role
      - url
      title: MemoryContextItem
    MemoryContextList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/MemoryContextItem'
          type: array
          title: Items
        total:
          anyOf:
          - type: integer
          - type: 'null'
          title: Total
      type: object
      title: MemoryContextList
    MemoryContextUpdateRequest:
      properties:
        role:
          anyOf:
          - type: string
          - type: 'null'
          title: Role
          description: user|assistant|system 或自定义
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          description: 记忆条目描述
      type: object
      title: MemoryContextUpdateRequest
    MemoryDeleteResponse:
      properties:
        status:
          type: string
          title: Status
        memory_key:
          type: string
          title: Memory Key
        deleted_contexts:
          type: integer
          title: Deleted Contexts
          default: 0
        deleted_vectors:
          type: integer
          title: Deleted Vectors
          default: 0
        deleted_files:
          type: integer
          title: Deleted Files
          default: 0
        deleted_session:
          type: boolean
          title: Deleted Session
          default: false
      type: object
      required:
      - status
      - memory_key
      title: MemoryDeleteResponse
    MemoryPushRequest:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 用户钱包 ID（兼容字段；推荐使用 Authorization）
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 可选：数据归属钱包 ID（业务用户）。默认等于 wallet_id。
        app_id:
          type: string
          title: App Id
          description: 业务插件 ID
        session_id:
          type: string
          title: Session Id
          description: 业务侧会话 ID
        filename:
          type: string
          title: Filename
          description: 业务上传的 session 历史文件名
        description:
          anyOf:
          - type: string
          - type: 'null'
          title: Description
          description: 文件说明（可选）
        summary_threshold:
          anyOf:
          - type: integer
          - type: 'null'
          title: Summary Threshold
          description: 摘要触发阈值（可选，覆盖插件配置）
      type: object
      required:
      - app_id
      - session_id
      - filename
      title: MemoryPushRequest
    MemoryPushResponse:
      properties:
        status:
          type: string
          title: Status
        messages_written:
          type: integer
          title: Messages Written
        metas:
          items:
            additionalProperties: true
            type: object
          type: array
          title: Metas
      type: object
      required:
      - status
      - messages_written
      title: MemoryPushResponse
    MemorySessionItem:
      properties:
        memory_key:
          type: string
          title: Memory Key
        wallet_id:
          type: string
          title: Wallet Id
        app_id:
          type: string
          title: App Id
        session_id:
          type: string
          title: Session Id
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
        message_count:
          type: integer
          title: Message Count
          default: 0
        last_message_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Last Message At
      type: object
      required:
      - memory_key
      - wallet_id
      - app_id
      - session_id
      title: MemorySessionItem
    MemorySessionList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/MemorySessionItem'
          type: array
          title: Items
        total:
          anyOf:
          - type: integer
          - type: 'null'
          title: Total
      type: object
      title: MemorySessionList
    MemoryUploadResponse:
      properties:
        bucket:
          type: string
          title: Bucket
        key:
          type: string
          title: Key
        source_url:
          type: string
          title: Source Url
        filename:
          type: string
          title: Filename
        size_bytes:
          type: integer
          title: Size Bytes
        content_sha256:
          type: string
          title: Content Sha256
        data_wallet_id:
          type: string
          title: Data Wallet Id
        push_result:
          anyOf:
          - $ref: '#/components/schemas/MemoryPushResponse'
          - type: 'null'
      type: object
      required:
      - bucket
      - key
      - source_url
      - filename
      - size_bytes
      - content_sha256
      - data_wallet_id
      title: MemoryUploadResponse
    PluginFileInfo:
      properties:
        path:
          type: string
          title: Path
        kind:
          type: string
          title: Kind
        exists:
          type: boolean
          title: Exists
          default: true
        size_bytes:
          type: integer
          title: Size Bytes
          default: 0
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
      type: object
      required:
      - path
      - kind
      title: PluginFileInfo
    PluginFileListResp:
      properties:
        app_id:
          type: string
          title: App Id
        files:
          items:
            $ref: '#/components/schemas/PluginFileInfo'
          type: array
          title: Files
      type: object
      required:
      - app_id
      - files
      title: PluginFileListResp
    PluginFileReadResp:
      properties:
        app_id:
          type: string
          title: App Id
        path:
          type: string
          title: Path
        kind:
          type: string
          title: Kind
        content:
          type: string
          title: Content
      type: object
      required:
      - app_id
      - path
      - kind
      - content
      title: PluginFileReadResp
    PluginFileUpdateReq:
      properties:
        path:
          type: string
          title: Path
        content:
          type: string
          title: Content
          default: ''
      type: object
      required:
      - path
      title: PluginFileUpdateReq
    PluginFileUpdateResp:
      properties:
        app_id:
          type: string
          title: App Id
        path:
          type: string
          title: Path
        status:
          type: string
          title: Status
          default: ok
      type: object
      required:
      - app_id
      - path
      title: PluginFileUpdateResp
    PrivateDBBindRequest:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 操作钱包 ID（兼容字段；推荐使用 Authorization）
        app_id:
          type: string
          title: App Id
          description: 业务插件 ID
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 可选：数据归属钱包 ID（业务用户）。默认等于 wallet_id。
        session_ids:
          items:
            type: string
          type: array
          title: Session Ids
          description: 绑定的 session_id 列表
      type: object
      required:
      - app_id
      - session_ids
      title: PrivateDBBindRequest
    PrivateDBBindResponse:
      properties:
        private_db_id:
          type: string
          title: Private Db Id
        session_ids:
          items:
            type: string
          type: array
          title: Session Ids
        bound_count:
          type: integer
          title: Bound Count
      type: object
      required:
      - private_db_id
      - session_ids
      - bound_count
      title: PrivateDBBindResponse
    PrivateDBCreateRequest:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 操作钱包 ID（兼容字段；推荐使用 Authorization）
        app_id:
          type: string
          title: App Id
          description: 业务插件 ID
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 可选：数据归属钱包 ID（业务用户）。默认等于 wallet_id。
        private_db_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
          description: 可选：自定义私有库 ID
      type: object
      required:
      - app_id
      title: PrivateDBCreateRequest
    PrivateDBInfo:
      properties:
        private_db_id:
          type: string
          title: Private Db Id
        app_id:
          type: string
          title: App Id
        owner_wallet_id:
          type: string
          title: Owner Wallet Id
        status:
          type: string
          title: Status
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
        updated_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Updated At
      type: object
      required:
      - private_db_id
      - app_id
      - owner_wallet_id
      - status
      title: PrivateDBInfo
    PrivateDBList:
      properties:
        items:
          items:
            $ref: '#/components/schemas/PrivateDBInfo'
          type: array
          title: Items
      type: object
      title: PrivateDBList
    PrivateDBSessionInfo:
      properties:
        session_id:
          type: string
          title: Session Id
        created_at:
          anyOf:
          - type: string
          - type: 'null'
          title: Created At
      type: object
      required:
      - session_id
      title: PrivateDBSessionInfo
    PrivateDBSessionList:
      properties:
        private_db_id:
          type: string
          title: Private Db Id
        app_id:
          type: string
          title: App Id
        owner_wallet_id:
          type: string
          title: Owner Wallet Id
        sessions:
          items:
            $ref: '#/components/schemas/PrivateDBSessionInfo'
          type: array
          title: Sessions
      type: object
      required:
      - private_db_id
      - app_id
      - owner_wallet_id
      title: PrivateDBSessionList
    PrivateDBUnbindResponse:
      properties:
        private_db_id:
          type: string
          title: Private Db Id
        session_id:
          type: string
          title: Session Id
        removed_count:
          type: integer
          title: Removed Count
      type: object
      required:
      - private_db_id
      - session_id
      - removed_count
      title: PrivateDBUnbindResponse
    QueryRequest:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 操作钱包 ID（兼容字段；推荐使用 Authorization）
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 可选：数据归属钱包 ID（业务用户）。默认等于 wallet_id。
        app_id:
          type: string
          title: App Id
          description: 业务插件 ID
        session_id:
          type: string
          title: Session Id
          description: 业务侧会话 ID
        intent:
          type: string
          title: Intent
          description: 业务意图，如 generate_questions
        query:
          anyOf:
          - type: string
          - type: 'null'
          title: Query
          description: 用户输入（未提供简历时的兜底）
        resume_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Resume Id
          description: 可选：中台返回的简历 ID
        jd_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Jd Id
          description: 可选：中台返回的 JD ID
        target:
          anyOf:
          - type: string
          - type: 'null'
          title: Target
          description: 可选：目标岗位
        company:
          anyOf:
          - type: string
          - type: 'null'
          title: Company
          description: 可选：公司名
        intent_params:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Intent Params
      type: object
      required:
      - app_id
      - session_id
      - intent
      title: QueryRequest
    QueryResponse:
      properties:
        answer:
          additionalProperties: true
          type: object
          title: Answer
      type: object
      required:
      - answer
      title: QueryResponse
    ResumeUploadRequest:
      properties:
        wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Wallet Id
          description: 操作钱包 ID（兼容字段；推荐使用 Authorization）
        data_wallet_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Data Wallet Id
          description: 可选：数据归属钱包 ID（业务用户）。默认等于 wallet_id。
        app_id:
          type: string
          title: App Id
          description: 业务插件 ID
        resume:
          title: Resume
          description: 简历 JSON 或文本
        session_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Session Id
          description: 可选：业务会话 ID
        private_db_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Private Db Id
          description: 可选：私有库 ID（与 session_id 二选一）
        resume_id:
          anyOf:
          - type: string
          - type: 'null'
          title: Resume Id
          description: 可选：业务侧简历 ID
        kb_key:
          anyOf:
          - type: string
          - type: 'null'
          title: Kb Key
          description: 可选：指定 user_upload KB
        metadata:
          anyOf:
          - additionalProperties: true
            type: object
          - type: 'null'
          title: Metadata
          description: 可选：补充元数据
      type: object
      required:
      - app_id
      - resume
      title: ResumeUploadRequest
    ResumeUploadResponse:
      properties:
        resume_id:
          type: string
          title: Resume Id
        kb_key:
          type: string
          title: Kb Key
        collection:
          type: string
          title: Collection
        doc_id:
          type: string
          title: Doc Id
        source_url:
          type: string
          title: Source Url
      type: object
      required:
      - resume_id
      - kb_key
      - collection
      - doc_id
      - source_url
      title: ResumeUploadResponse
    StoreHealthItem:
      properties:
        name:
          type: string
          title: Name
          description: Store name
        status:
          type: string
          title: Status
          description: ok|error|disabled|configured
        details:
          anyOf:
          - type: string
          - type: 'null'
          title: Details
          description: Health detail message
      type: object
      required:
      - name
      - status
      title: StoreHealthItem
    StoresHealthResponse:
      properties:
        stores:
          items:
            $ref: '#/components/schemas/StoreHealthItem'
          type: array
          title: Stores
      type: object
      required:
      - stores
      title: StoresHealthResponse
    ValidationError:
      properties:
        loc:
          items:
            anyOf:
            - type: string
            - type: integer
          type: array
          title: Location
        msg:
          type: string
          title: Message
        type:
          type: string
          title: Error Type
      type: object
      required:
      - loc
      - msg
      - type
      title: ValidationError
    WorkflowItem:
      properties:
        name:
          type: string
          title: Name
        description:
          type: string
          title: Description
          default: ''
        intents:
          items:
            type: string
          type: array
          title: Intents
        enabled:
          type: boolean
          title: Enabled
          default: true
      type: object
      required:
      - name
      title: WorkflowItem
